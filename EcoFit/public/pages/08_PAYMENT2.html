<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Order Tracking</title>
        <link rel="icon" href="../images/ecofit_logo2.png" sizes="32x32" type="image/png">
        <link rel="stylesheet" href="../css/USER_MAINSTYLE.css" />
        <script src="../js/notification_handler.js"></script>
    </head>
    <body class="bodypayment">
        <iframe id="header-frame" class="header-frame"></iframe>
        <script>    
            window.addEventListener("DOMContentLoaded", () => {
            const header = document.getElementById("header-frame");
            const isLoggedIn = localStorage.getItem("isLoggedIn") === "true";
            header.src = isLoggedIn 
                ? "../template/header.html" 
                : "../template/header0.html";

            header.onload = () => {
                header.contentWindow.postMessage({ activeNav: "nav-shop" }, "*");
            };
            });

            // ðŸ”¹ Bá»” SUNG ÄOáº N NÃ€Y Äá»‚ NHáº¬N TÃN HIá»†U Tá»ª HEADER VÃ€ Xá»¬ LÃ LOGIN/LOGOUT
            window.addEventListener("message", (e) => {
            if (!e.data || !e.data.action) return;

            // Báº¥m nÃºt Login trong header0
            if (e.data.action === "goToLogin") {
                window.location.href = "00_LOGIN.html";
            }

            // Báº¥m nÃºt Sign Up trong header0
            if (e.data.action === "goToSignup") {
                window.location.href = "00_SIGNUP.html";
            }

            // Khi Ä‘Äƒng nháº­p thÃ nh cÃ´ng (tá»« login.js hoáº·c login form)
            if (e.data.action === "loginSuccess" || e.data.action === "loggedIn") {
                localStorage.setItem("isLoggedIn", "true");
                document.getElementById("header-frame").src = "../template/header.html";
            }

            // Khi ngÆ°á»i dÃ¹ng logout tá»« header.html
            if (e.data.action === "logout") {
                localStorage.removeItem("isLoggedIn");
                localStorage.removeItem("login_infor");
                document.getElementById("header-frame").src = "../template/header0.html";
            }
            // ðŸŸ¢ Xá»­ lÃ½ toggle notifications
            if (e.data.action === "toggleNotifications") {
                if (!window.NotificationPopup) {
                    window.NotificationPopup = createNotificationPopupInParent(
                        e.data.notifications, 
                        e.data.bellPosition
                    );
                } else {
                    window.NotificationPopup.toggle();
                }
            }
            });
            document.addEventListener("click", e => {
            if (e.target.type === "radio") {
                if (e.target.wasChecked) {
                e.target.checked = false;
                }
                e.target.wasChecked = e.target.checked;
            };
            });
            
        </script>
        <main class="checkout-container">
            <!-- LEFT -->
            <section class="checkout-left">
                <div class="container">
                    <h2 class="page-title">TRACKING ORDER 
                        <span>#1056</span>
                    </h2>
                    <div class="sectiontracking">
                        <h2 class="title">Arrives at 17 November</h2>
                        <div class="order-progress" data-step="2" aria-label="Order progress">
                            <div class="step done">
                                <div class="circle">&#10003;</div>
                                <div class="label">ORDER PLACED</div>
                            </div>
                            <div class="step active">
                                <div class="circle">2</div>
                                <div class="label">PROCESSING</div>
                            </div>
                            <div class="step">
                                <div class="circle">3</div>
                                <div class="label">PACKING</div>
                            </div>
                            <div class="step">
                                <div class="circle">4</div>
                                <div class="label">SHIPPING</div>
                            </div>
                            <div class="step">
                                <div class="circle">5</div>
                                <div class="label">DELIVERED</div>
                            </div>
                        </div>
                        <h2 class="title">Shipping Service</h2>
                        <div class="shipping-info">
                            <img src="../images/logo-viettle.jpg" alt="Viettel Post" style="width: 100px; height: auto;"/>
                            <div>
                                <strong>Viettel Post</strong><br>
                                <small>#JHSDH-ADF65-SDKF5</small>
                            </div>
                        </div>
                    </div>
                    <!-- DELIVERY BOX (separate) -->
                    <div class="delivery-box">
                        <h2 class="title">Delivery Address</h2>
                        <p class="delivery-text">
                            - | -<br>
                            -
                        </p>
                    </div>
                    <div class="map-box">
                        <iframe 
                            src="tracking.html" scrolling="no">
                        </iframe>
                    </div>
                </div>
            </section>
            <!-- RIGHT -->
            <div class="checkout-right">
            <!-- ORDER DETAIL -->
            <div class="order-detail">
                <h3 class="order-detail__title">ORDER DETAIL</h3>
            </div>
            
            <br/>
            <!-- ORDER SUMMARY -->
            <div class="order-summary">
                <h2 class="order-summary__title">ORDER SUMMARY</h2>
                
                <div class="order-summary__row">
                <span>Subtotal Product</span>
                <span class="order-summary__value subtotal">-</span>
                </div>
                
                <div class="order-summary__row">
                <span>Shipping Cost</span>
                <span class="order-summary__value shipping">30.000Ä‘</span>
                </div>
                
                <div class="order-summary__row">
                <span>Discount</span>
                <span class="order-summary__value discount">-</span>
                </div>
                
                <div class="order-summary__total">
                <span>Total</span>
                <span class="total-value">-</span>
                </div>
            </div>
            </div>
        </main>
        <iframe src="../template/footer.html" id="footer-frame" class="footer-frame"></iframe>
        <script src="../js/payment2.js"></script>
</body>
</html>
