<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>12_MYPLANT&DAILYGREENSTREAK</title>

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    />

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&family=Outfit:wght@100..900&display=swap" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../css/USER_MAINSTYLE.css" />
  </head>

  <body>
    <!-- Header -->
    <iframe id="header-frame" class="header-frame"></iframe>
    <script>
        window.addEventListener("DOMContentLoaded", () => {
        const header = document.getElementById("header-frame");
        const isLoggedIn = localStorage.getItem("isLoggedIn") === "true";
        header.src = isLoggedIn 
            ? "../template/header.html" 
            : "../template/header0.html";
        });

        // üîπ B·ªî SUNG ƒêO·∫†N N√ÄY ƒê·ªÇ NH·∫¨N T√çN HI·ªÜU T·ª™ HEADER V√Ä X·ª¨ L√ù LOGIN/LOGOUT
        window.addEventListener("message", (e) => {
        if (!e.data || !e.data.action) return;

        // B·∫•m n√∫t Login trong header0
        if (e.data.action === "goToLogin") {
            window.location.href = "00_LOGIN.html";
        }

        // B·∫•m n√∫t Sign Up trong header0
        if (e.data.action === "goToSignup") {
            window.location.href = "00_SIGNUP.html";
        }

        // Khi ƒëƒÉng nh·∫≠p th√†nh c√¥ng (t·ª´ login.js ho·∫∑c login form)
        if (e.data.action === "loginSuccess" || e.data.action === "loggedIn") {
            localStorage.setItem("isLoggedIn", "true");
            document.getElementById("header-frame").src = "../template/header.html";
        }

        // Khi ng∆∞·ªùi d√πng logout t·ª´ header.html
        if (e.data.action === "logout") {
            localStorage.removeItem("isLoggedIn");
            localStorage.removeItem("login_infor");
            document.getElementById("header-frame").src = "../template/header0.html";
        }
        });
    </script>

    <!-- Main Content -->
    <div class="personal_info_container">
      <!-- Sidebar (s·ª≠ d·ª•ng chung) -->
      <div class="sidebar">
        <div class="menu-section">
          <h1>My Account</h1>
          <nav>
            <ul>
              <li class="active"><a href="12_MYPLANT&DAILYGREENSTREAK.html">My Plant & Daily Green Streak</a></li>
              <li><a href="#">Notifications</a></li>
              <li><a href="#">Orders</a></li>
            </ul>
          </nav>
        </div>
        <div class="menu-section">
          <h1>Settings</h1>
          <nav>
            <ul>
              <li><a href="09_PERSONAL_INFO.html">Personal Info</a></li>
              <li><a href="11_PASSWORD.html">Password</a></li>
            </ul>
          </nav>
        </div>
      </div>

      <!-- Main Content Area -->
      <div class="content">
        <h2><b>My Plant & Daily Green Streak</b></h2>
        
        <div class="myplant-main-content">
          <div class="plant-card">
            <div class="plant-display">
              <img
                id="plant-img"
                src="../images/hat.png"
                alt="Plant Stage"
              />
            </div>

            <div class="plant-info">
              <p>
                <span style="color: #666">Current Period:</span>
                <b id="period" style="color: #69bd76; font-size: 18px">Seed üå±</b>
              </p>
              <p>
                <span style="color: #666">Green Score (Year):</span>
                <b id="green-score" style="color: #69bd76; font-size: 18px">0</b>
              </p>
            </div>
          </div>

          <div class="myplant-calendar">
            <div class="month-header">
              <span class="arrow" id="prev-month">‚Üê</span>
              <span class="month-title" id="month-title">October 2025</span>
              <span class="arrow" id="next-month">‚Üí</span>
            </div>

            <div class="days-grid" id="days-container"></div>

            <!-- Claim Reward -->
            <div style="display: flex; justify-content: center">
              <button id="reward-btn" class="reward-btn">
                Claim Reward
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <iframe
      src="../template/footer.html"
      class="footer-frame"
      style="width: 100%; border: none; overflow: hidden"
    ></iframe>

    <script src="../js/myplant.js"></script>
  </body>
</html>