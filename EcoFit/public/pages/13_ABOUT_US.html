<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>13_ABOUT_US</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/USER_MAINSTYLE.css">
</head>
<body>
    <iframe id="header-frame" class="header-frame"></iframe>
    <script>
                function createNotificationPopupInParent(notifications, bellPosition) {
            // Xóa popup cũ nếu có
            const existingOverlay = document.getElementById('notification-overlay-parent');
            const existingPopup = document.getElementById('notification-popup-parent');
            if (existingOverlay) existingOverlay.remove();
            if (existingPopup) existingPopup.remove();

            // Tạo overlay
            const overlay = document.createElement('div');
            overlay.id = 'notification-overlay-parent';
            overlay.className = 'notification-overlay';
            overlay.onclick = () => closeNotificationPopup();
            
            // Tạo popup
            const popup = document.createElement('div');
            popup.id = 'notification-popup-parent';
            popup.className = 'notification-popup';
            
            popup.innerHTML = `
                <div class="popup-header">
                    <h3 class="popup-title">Notifications</h3>
                    <button class="mark-all-read" onclick="markAllNotificationsAsRead()">
                        Mark all as read
                    </button>
                </div>
                
                <div class="notification-list" id="notification-list-parent">
                    ${renderNotificationsList(notifications)}
                </div>
                
                <div class="popup-footer">
                    <button class="view-all-btn" onclick="viewAllNotifications()">
                        View all notifications
                    </button>
                </div>
            `;
            
            // Thêm vào body
            document.body.appendChild(overlay);
            document.body.appendChild(popup);
            
            // Inject styles nếu chưa có
            injectNotificationStyles();
            
            // Position popup dựa vào vị trí bell
            if (bellPosition) {
                popup.style.top = `${bellPosition.top + 10}px`;
                popup.style.right = `${bellPosition.right}px`;
            }
            
            // Show popup
            setTimeout(() => {
                overlay.classList.add('show');
                popup.classList.add('show');
            }, 10);

            return {
                toggle: () => toggleNotificationPopup(),
                close: () => closeNotificationPopup()
            };
        }

        function renderNotificationsList(notifications) {
            if (!notifications || notifications.length === 0) {
                return `
                    <div class="empty-notifications">
                        <div class="empty-icon">🔔</div>
                        <p class="empty-text">No new notifications</p>
                    </div>
                `;
            }
            
            return notifications.map(notif => `
                <div class="notification-item ${notif.read ? '' : 'unread'}" 
                    onclick="handleNotificationClick(${notif.id})">
                    <div class="notification-icon ${notif.iconClass}">
                        ${notif.icon}
                    </div>
                    <div class="notification-content">
                        <div class="notification-title">${notif.title}</div>
                        <div class="notification-message">${notif.message}</div>
                        <div class="notification-time">${notif.time}</div>
                    </div>
                </div>
            `).join('');
        }

        function closeNotificationPopup() {
            const overlay = document.getElementById('notification-overlay-parent');
            const popup = document.getElementById('notification-popup-parent');
            
            if (overlay) overlay.classList.remove('show');
            if (popup) popup.classList.remove('show');
            
            setTimeout(() => {
                if (overlay) overlay.remove();
                if (popup) popup.remove();
                // Reset global reference
                window.NotificationPopup = null;
            }, 300);
        }

        function toggleNotificationPopup() {
            const popup = document.getElementById('notification-popup-parent');
            if (popup && popup.classList.contains('show')) {
                closeNotificationPopup();
            }
        }

        function handleNotificationClick(id) {
            console.log('Clicked notification:', id);
            // Gửi message cho iframe để update read status
            const header = document.getElementById('header-frame');
            if (header && header.contentWindow) {
                header.contentWindow.postMessage({
                    action: 'markNotificationAsRead',
                    id: id
                }, '*');
            }
        }

        function markAllNotificationsAsRead() {
            const header = document.getElementById('header-frame');
            if (header && header.contentWindow) {
                header.contentWindow.postMessage({
                    action: 'markAllNotificationsAsRead'
                }, '*');
            }
            closeNotificationPopup();
        }

        function viewAllNotifications() {
            alert('Navigate to notifications page');
            closeNotificationPopup();
        }

        function injectNotificationStyles() {
            if (document.getElementById('notification-styles-parent')) return;
            
            const style = document.createElement('style');
            style.id = 'notification-styles-parent';
            style.textContent = `
                /* Overlay */
                .notification-overlay {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.3);
                    opacity: 0;
                    visibility: hidden;
                    transition: all 0.3s;
                    z-index: 9998;
                }
                
                .notification-overlay.show {
                    opacity: 1;
                    visibility: visible;
                }
                
                /* Notification Popup */
                .notification-popup {
                    position: fixed;
                    width: 380px;
                    background: white;
                    border-radius: 16px;
                    box-shadow: 0 10px 40px rgba(0,0,0,0.2);
                    opacity: 0;
                    visibility: hidden;
                    transform: translateY(-10px);
                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                    z-index: 9999;
                    overflow: hidden;
                    max-height: 90vh;
                }
                
                .notification-popup.show {
                    opacity: 1;
                    visibility: visible;
                    transform: translateY(0);
                }
                
                /* Arrow pointing to bell */
                .notification-popup::before {
                    content: '';
                    position: absolute;
                    top: -8px;
                    right: 60px;
                    width: 16px;
                    height: 16px;
                    background: white;
                    transform: rotate(45deg);
                    box-shadow: -3px -3px 8px rgba(0,0,0,0.08);
                    z-index: -1;
                }
                
                .notification-popup::after {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    height: 16px;
                    background: white;
                    z-index: 1;
                }
                
                /* Popup Header */
                .popup-header {
                    padding: 20px 20px 15px 20px;
                    border-bottom: 1px solid #e9ecef;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    position: relative;
                    z-index: 2;
                    background: white;
                }
                
                .popup-title {
                    font-size: 20px;
                    font-weight: 700;
                    color: #212529;
                }
                
                .mark-all-read {
                    background: none;
                    border: none;
                    color: #69BD76;
                    font-size: 13px;
                    font-weight: 600;
                    cursor: pointer;
                    padding: 6px 12px;
                    border-radius: 6px;
                    transition: all 0.2s;
                }
                
                .mark-all-read:hover {
                    background: #f1f8f5;
                }
                
                /* Notification List */
                .notification-list {
                    max-height: 400px;
                    overflow-y: auto;
                }
                
                .notification-item {
                    padding: 16px 20px;
                    border-bottom: 1px solid #f8f9fa;
                    cursor: pointer;
                    transition: all 0.2s;
                    display: flex;
                    gap: 15px;
                    position: relative;
                }
                
                .notification-item:hover {
                    background: #f8f9fa;
                }
                
                .notification-item.unread {
                    background: #f1f8f5;
                }
                
                .notification-item.unread::before {
                    content: '';
                    position: absolute;
                    left: 0;
                    top: 0;
                    bottom: 0;
                    width: 3px;
                    background: #69BD76;
                }
                
                .notification-icon {
                    width: 45px;
                    height: 45px;
                    border-radius: 12px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 24px;
                    flex-shrink: 0;
                }
                
                .notification-icon.gift {
                    background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
                }
                
                .notification-icon.shop {
                    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
                }
                
                .notification-icon.delivery {
                    background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
                }
                
                .notification-icon.info {
                    background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
                }
                
                .notification-content {
                    flex: 1;
                }
                
                .notification-title {
                    font-size: 15px;
                    font-weight: 600;
                    color: #212529;
                    margin-bottom: 4px;
                    line-height: 1.4;
                }
                
                .notification-message {
                    font-size: 14px;
                    color: #6c757d;
                    line-height: 1.5;
                    margin-bottom: 6px;
                }
                
                .notification-time {
                    font-size: 12px;
                    color: #adb5bd;
                }
                
                /* Empty State */
                .empty-notifications {
                    padding: 60px 20px;
                    text-align: center;
                }
                
                .empty-icon {
                    font-size: 60px;
                    margin-bottom: 15px;
                    opacity: 0.3;
                }
                
                .empty-text {
                    font-size: 16px;
                    color: #adb5bd;
                }
                
                /* Popup Footer */
                .popup-footer {
                    padding: 15px 20px;
                    border-top: 1px solid #e9ecef;
                    text-align: center;
                    background: white;
                }
                
                .view-all-btn {
                    background: none;
                    border: none;
                    color: #69BD76;
                    font-size: 14px;
                    font-weight: 600;
                    cursor: pointer;
                    padding: 8px 16px;
                    border-radius: 8px;
                    transition: all 0.2s;
                }
                
                .view-all-btn:hover {
                    background: #f1f8f5;
                }

                /* Scrollbar */
                .notification-list::-webkit-scrollbar {
                    width: 6px;
                }
                
                .notification-list::-webkit-scrollbar-track {
                    background: #f8f9fa;
                }
                
                .notification-list::-webkit-scrollbar-thumb {
                    background: #dee2e6;
                    border-radius: 10px;
                }
                
                .notification-list::-webkit-scrollbar-thumb:hover {
                    background: #ced4da;
                }
            `;
            
            document.head.appendChild(style);
        }
        
        window.addEventListener("DOMContentLoaded", () => {
        const header = document.getElementById("header-frame");
        const isLoggedIn = localStorage.getItem("isLoggedIn") === "true";
        header.src = isLoggedIn 
            ? "../template/header.html" 
            : "../template/header0.html";

        header.onload = () => {
            header.contentWindow.postMessage({ activeNav: "nav-about" }, "*");
        };
        });

        // 🔹 BỔ SUNG ĐOẠN NÀY ĐỂ NHẬN TÍN HIỆU TỪ HEADER VÀ XỬ LÝ LOGIN/LOGOUT
        window.addEventListener("message", (e) => {
        if (!e.data || !e.data.action) return;

        // Bấm nút Login trong header0
        if (e.data.action === "goToLogin") {
            window.location.href = "00_LOGIN.html";
        }

        // Bấm nút Sign Up trong header0
        if (e.data.action === "goToSignup") {
            window.location.href = "00_SIGNUP.html";
        }

        // Khi đăng nhập thành công (từ login.js hoặc login form)
        if (e.data.action === "loginSuccess" || e.data.action === "loggedIn") {
            localStorage.setItem("isLoggedIn", "true");
            document.getElementById("header-frame").src = "../template/header.html";
        }

        // Khi người dùng logout từ header.html
        if (e.data.action === "logout") {
            localStorage.removeItem("isLoggedIn");
            localStorage.removeItem("login_infor");
            document.getElementById("header-frame").src = "../template/header0.html";
        }
        // 🟢 Xử lý toggle notifications
        if (e.data.action === "toggleNotifications") {
            if (!window.NotificationPopup) {
                window.NotificationPopup = createNotificationPopupInParent(
                    e.data.notifications, 
                    e.data.bellPosition
                );
            } else {
                window.NotificationPopup.toggle();
            }
        }
        });
    </script>
    <!-- Hero Section -->
    <section class="hero-aboutus">
        <div class="container-aboutus">
            <div class="hero-content-aboutus">
                <div class="hero-text-aboutus">
                    <h1>Crafting Green Excellence Together</h1>
                    <p>At <b>EcoFit</b>, we believe in the power of collaboration to turn the past into a greener future. Founded in Vietnam on the 8th of March in 2023, EcoFit is a pioneering B2C e-commerce platform in Vietnam dedicated to sustainable products, by integrating ecological advantages and technology to deliver world-class green innovations. Our strategic focus lies in meticulously curating, presenting, and distributing top-tier eco-friendly life.</p>
                    <button class="cta-button" onclick="window.location.href='02_PRODUCT_CATEGORY.html'">
                        EXPLORE ALL →
                    </button>
                </div>
                <div class="hero-image">
                    <img src="../images/hero-image.png" alt="Hero Image">
                </div>
            </div>
        </div>
    </section>

    <!-- Description Section -->
    <section class="description-aboutus">
        <div class="container-aboutus">
            <p>With a wide range of categories-clothing, furniture, household appliances, cosmetics, and more-each product is selected not only for its practical value but also for its environmental benefits. Through AI-backed tools such as Green Score, detailed certifications, and unique gamification features like virtual green trees and daily green streaks, EcoFit inspires users to make responsible, conscious, and enjoyable shopping decisions.</p>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats">
        <div class="container-aboutus">
            <div class="stats-grid">
                <div class="stat-item">
                    <h2>150+</h2>
                    <p>Eco-Friendly Products</p>
                </div>
                <div class="stat-item">
                    <h2>100+</h2>
                    <p>Green Brand Partners</p>
                </div>
                <div class="stat-item">
                    <h2>200+</h2>
                    <p>Community Members</p>
                </div>
                <div class="stat-item">
                    <h2>30+</h2>
                    <p>Sustainable Awards & Certifications</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Mission Section -->
    <section class="mission" id="mission">
        <div class="container-aboutus">
            <div class="mission-content">
                <div class="mission-image">
                    <img src="../images/mission-image.png" alt="Mission Image">
                </div>
                <div class="mission-text">
                    <h2>Our Mission</h2>
                    <p>To provide a transparent and trustworthy shopping experience that encourages durable consumption. By integrating technology and ecological values, EcoFit promotes responsible buying behavior and supporting businesses that align with our sustainability goals.</p>
                    <ul class="mission-list">
                        <li>
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M16.7 6l-9 9-4.4-4.4" stroke="#4CAF50" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span>Innovating for a Sustainable Future</span>
                        </li>
                        <li>
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M16.7 6l-9 9-4.4-4.4" stroke="#4CAF50" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span>Encouraging Responsible Consumption</span>
                        </li>
                        <li>
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M16.7 6l-9 9-4.4-4.4" stroke="#4CAF50" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span>Building Strong Green Communities</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Vision Section -->
    <section class="vision">
        <div class="container-aboutus">
            <div class="vision-content">
                <div class="vision-text">
                    <h2>Our Vision</h2>
                    <p>EcoFit aims to become Vietnam’s leading e-commerce platform for sustainable products, connecting responsible enterprises with conscious consumers. Together, we shape a lifestyle that harmonizes environmental responsibility and modern living.</p>
                </div>
                <div class="vision-image">
                    <img src="../images/vision-image.png" alt="Vision Image">
                </div>
            </div>
        </div>
    </section>

    <!-- History Section -->
    <section class="history">
        <div class="container-aboutus">
            <div class="history-content">
                <div class="history-image">
                    <img src="../images/history-image.png" alt="History Image">
                </div>
                <div class="history-text" id="history">
                    <h2>Our History</h2>
                    <p>Founded with a vision to make green products accessible, EcoFit started as an idea to reduce the gap between consumer demand and limited eco-dedicated platforms in Vietnam. Step by step, EcoFit has grown into a trusted marketplace that fosters awareness, responsibility, and positive lifestyle changes.</p>
                    <ul class="history-list">
                        <li>
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M16.7 6l-9 9-4.4-4.4" stroke="#4CAF50" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span>Humble Beginnings</span>
                        </li>
                        <li>
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M16.7 6l-9 9-4.4-4.4" stroke="#4CAF50" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span>Growing Awareness & Trust</span>
                        </li>
                        <li>
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M16.7 6l-9 9-4.4-4.4" stroke="#4CAF50" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span>Shaping a Greener Future</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- How We Work Section -->
    <section class="how-we-work" id="how-we-work">
        <div class="container-aboutus">
            <h2>How We Do Work</h2>
            <p class="how-we-work-desc" style="text-align: center;">We follow a transparent, collaborative, and user-centered approach, ensuring that every shopping journey is clear, reliable, and rewarding. From discovering eco-products to gamified engagement, EcoFit makes green living practical and inspiring</p>
            <div class="work-image">
                <img src="../images/work-process.png" alt="Work Process">
            </div>
        </div>
    </section>

    <!-- Team Section -->
    <section class="team">
        <div class="container-aboutus">
            <h2>Crafting Excellence as a Team</h2>
            <p class="team-desc">Our success comes from a dedicated team passionate about sustainability, innovation, and user experience. Together, we bring visions of a greener future into reality - one product, one choice at a time.</p>
            <div class="team-grid">
                <div class="team-member">
                    <div class="member-image">
                        <img src="../images/member1.jpg" alt="Truong Nguyet Ha">
                    </div>
                    <h3>Truong Nguyet Ha</h3>
                    <p style="text-align: center;">K234111388</p>
                </div>
                <div class="team-member">
                    <div class="member-image">
                        <img src="../images/member2.jpg" alt="Le Thi My Hoa">
                    </div>
                    <h3>Le Thi My Hoa</h3>
                    <p style="text-align: center;">K234111389</p>
                </div>
                <div class="team-member">
                    <div class="member-image">
                        <img src="../images/member3.jpg" alt="Nguyen Duong Thu Uyen">
                    </div>
                    <h3>Nguyen Duong Thu Uyen</h3>
                    <p style="text-align: center;">K234111422</p>
                </div>
                <div class="team-member">
                    <div class="member-image">
                        <img src="../images/member4.jpg" alt="Bui Hoang Dieu">
                    </div>
                    <h3>Bui Hoang Dieu</h3>
                    <p style="text-align: center;">K234111427</p>
                </div>
                <div class="team-member">
                    <div class="member-image">
                        <img src="../images/member5.jpg" alt="Tran Ngoc Bao Vy">
                    </div>
                    <h3>Tran Ngoc Bao Vy</h3>
                    <p style="text-align: center;">K234111461</p>
                </div>
            </div>
        </div>
    </section>
    <iframe src="../template/footer.html" id="footer-frame" class="footer-frame"></iframe>
    <script src="../js/about_us.js"></script>
</body>
</html>