<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>17_TERMS&CONDITIONS</title>
    <link rel="stylesheet" href="../css/USER_MAINSTYLE.css">
</head>
<body class="stylebody">
    <iframe id="header-frame" class="header-frame"></iframe>
    <script>
                function createNotificationPopupInParent(notifications, bellPosition) {
            // Xóa popup cũ nếu có
            const existingOverlay = document.getElementById('notification-overlay-parent');
            const existingPopup = document.getElementById('notification-popup-parent');
            if (existingOverlay) existingOverlay.remove();
            if (existingPopup) existingPopup.remove();

            // Tạo overlay
            const overlay = document.createElement('div');
            overlay.id = 'notification-overlay-parent';
            overlay.className = 'notification-overlay';
            overlay.onclick = () => closeNotificationPopup();
            
            // Tạo popup
            const popup = document.createElement('div');
            popup.id = 'notification-popup-parent';
            popup.className = 'notification-popup';
            
            popup.innerHTML = `
                <div class="popup-header">
                    <h3 class="popup-title">Notifications</h3>
                    <button class="mark-all-read" onclick="markAllNotificationsAsRead()">
                        Mark all as read
                    </button>
                </div>
                
                <div class="notification-list" id="notification-list-parent">
                    ${renderNotificationsList(notifications)}
                </div>
                
                <div class="popup-footer">
                    <button class="view-all-btn" onclick="viewAllNotifications()">
                        View all notifications
                    </button>
                </div>
            `;
            
            // Thêm vào body
            document.body.appendChild(overlay);
            document.body.appendChild(popup);
            
            // Inject styles nếu chưa có
            injectNotificationStyles();
            
            // Position popup dựa vào vị trí bell
            if (bellPosition) {
                popup.style.top = `${bellPosition.top + 10}px`;
                popup.style.right = `${bellPosition.right}px`;
            }
            
            // Show popup
            setTimeout(() => {
                overlay.classList.add('show');
                popup.classList.add('show');
            }, 10);

            return {
                toggle: () => toggleNotificationPopup(),
                close: () => closeNotificationPopup()
            };
        }

        function renderNotificationsList(notifications) {
            if (!notifications || notifications.length === 0) {
                return `
                    <div class="empty-notifications">
                        <div class="empty-icon">🔔</div>
                        <p class="empty-text">No new notifications</p>
                    </div>
                `;
            }
            
            return notifications.map(notif => `
                <div class="notification-item ${notif.read ? '' : 'unread'}" 
                    onclick="handleNotificationClick(${notif.id})">
                    <div class="notification-icon ${notif.iconClass}">
                        ${notif.icon}
                    </div>
                    <div class="notification-content">
                        <div class="notification-title">${notif.title}</div>
                        <div class="notification-message">${notif.message}</div>
                        <div class="notification-time">${notif.time}</div>
                    </div>
                </div>
            `).join('');
        }

        function closeNotificationPopup() {
            const overlay = document.getElementById('notification-overlay-parent');
            const popup = document.getElementById('notification-popup-parent');
            
            if (overlay) overlay.classList.remove('show');
            if (popup) popup.classList.remove('show');
            
            setTimeout(() => {
                if (overlay) overlay.remove();
                if (popup) popup.remove();
                // Reset global reference
                window.NotificationPopup = null;
            }, 300);
        }

        function toggleNotificationPopup() {
            const popup = document.getElementById('notification-popup-parent');
            if (popup && popup.classList.contains('show')) {
                closeNotificationPopup();
            }
        }

        function handleNotificationClick(id) {
            console.log('Clicked notification:', id);
            // Gửi message cho iframe để update read status
            const header = document.getElementById('header-frame');
            if (header && header.contentWindow) {
                header.contentWindow.postMessage({
                    action: 'markNotificationAsRead',
                    id: id
                }, '*');
            }
        }

        function markAllNotificationsAsRead() {
            const header = document.getElementById('header-frame');
            if (header && header.contentWindow) {
                header.contentWindow.postMessage({
                    action: 'markAllNotificationsAsRead'
                }, '*');
            }
            closeNotificationPopup();
        }

        function viewAllNotifications() {
            alert('Navigate to notifications page');
            closeNotificationPopup();
        }

        function injectNotificationStyles() {
            if (document.getElementById('notification-styles-parent')) return;
            
            const style = document.createElement('style');
            style.id = 'notification-styles-parent';
            style.textContent = `
                /* Overlay */
                .notification-overlay {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.3);
                    opacity: 0;
                    visibility: hidden;
                    transition: all 0.3s;
                    z-index: 9998;
                }
                
                .notification-overlay.show {
                    opacity: 1;
                    visibility: visible;
                }
                
                /* Notification Popup */
                .notification-popup {
                    position: fixed;
                    width: 380px;
                    background: white;
                    border-radius: 16px;
                    box-shadow: 0 10px 40px rgba(0,0,0,0.2);
                    opacity: 0;
                    visibility: hidden;
                    transform: translateY(-10px);
                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                    z-index: 9999;
                    overflow: hidden;
                    max-height: 90vh;
                }
                
                .notification-popup.show {
                    opacity: 1;
                    visibility: visible;
                    transform: translateY(0);
                }
                
                /* Arrow pointing to bell */
                .notification-popup::before {
                    content: '';
                    position: absolute;
                    top: -8px;
                    right: 60px;
                    width: 16px;
                    height: 16px;
                    background: white;
                    transform: rotate(45deg);
                    box-shadow: -3px -3px 8px rgba(0,0,0,0.08);
                    z-index: -1;
                }
                
                .notification-popup::after {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    height: 16px;
                    background: white;
                    z-index: 1;
                }
                
                /* Popup Header */
                .popup-header {
                    padding: 20px 20px 15px 20px;
                    border-bottom: 1px solid #e9ecef;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    position: relative;
                    z-index: 2;
                    background: white;
                }
                
                .popup-title {
                    font-size: 20px;
                    font-weight: 700;
                    color: #212529;
                }
                
                .mark-all-read {
                    background: none;
                    border: none;
                    color: #69BD76;
                    font-size: 13px;
                    font-weight: 600;
                    cursor: pointer;
                    padding: 6px 12px;
                    border-radius: 6px;
                    transition: all 0.2s;
                }
                
                .mark-all-read:hover {
                    background: #f1f8f5;
                }
                
                /* Notification List */
                .notification-list {
                    max-height: 400px;
                    overflow-y: auto;
                }
                
                .notification-item {
                    padding: 16px 20px;
                    border-bottom: 1px solid #f8f9fa;
                    cursor: pointer;
                    transition: all 0.2s;
                    display: flex;
                    gap: 15px;
                    position: relative;
                }
                
                .notification-item:hover {
                    background: #f8f9fa;
                }
                
                .notification-item.unread {
                    background: #f1f8f5;
                }
                
                .notification-item.unread::before {
                    content: '';
                    position: absolute;
                    left: 0;
                    top: 0;
                    bottom: 0;
                    width: 3px;
                    background: #69BD76;
                }
                
                .notification-icon {
                    width: 45px;
                    height: 45px;
                    border-radius: 12px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 24px;
                    flex-shrink: 0;
                }
                
                .notification-icon.gift {
                    background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
                }
                
                .notification-icon.shop {
                    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
                }
                
                .notification-icon.delivery {
                    background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
                }
                
                .notification-icon.info {
                    background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
                }
                
                .notification-content {
                    flex: 1;
                }
                
                .notification-title {
                    font-size: 15px;
                    font-weight: 600;
                    color: #212529;
                    margin-bottom: 4px;
                    line-height: 1.4;
                }
                
                .notification-message {
                    font-size: 14px;
                    color: #6c757d;
                    line-height: 1.5;
                    margin-bottom: 6px;
                }
                
                .notification-time {
                    font-size: 12px;
                    color: #adb5bd;
                }
                
                /* Empty State */
                .empty-notifications {
                    padding: 60px 20px;
                    text-align: center;
                }
                
                .empty-icon {
                    font-size: 60px;
                    margin-bottom: 15px;
                    opacity: 0.3;
                }
                
                .empty-text {
                    font-size: 16px;
                    color: #adb5bd;
                }
                
                /* Popup Footer */
                .popup-footer {
                    padding: 15px 20px;
                    border-top: 1px solid #e9ecef;
                    text-align: center;
                    background: white;
                }
                
                .view-all-btn {
                    background: none;
                    border: none;
                    color: #69BD76;
                    font-size: 14px;
                    font-weight: 600;
                    cursor: pointer;
                    padding: 8px 16px;
                    border-radius: 8px;
                    transition: all 0.2s;
                }
                
                .view-all-btn:hover {
                    background: #f1f8f5;
                }

                /* Scrollbar */
                .notification-list::-webkit-scrollbar {
                    width: 6px;
                }
                
                .notification-list::-webkit-scrollbar-track {
                    background: #f8f9fa;
                }
                
                .notification-list::-webkit-scrollbar-thumb {
                    background: #dee2e6;
                    border-radius: 10px;
                }
                
                .notification-list::-webkit-scrollbar-thumb:hover {
                    background: #ced4da;
                }
            `;
            
            document.head.appendChild(style);
        }
        
        window.addEventListener("DOMContentLoaded", () => {
        const header = document.getElementById("header-frame");
        const isLoggedIn = localStorage.getItem("isLoggedIn") === "true";
        header.src = isLoggedIn 
            ? "../template/header.html" 
            : "../template/header0.html";
        });

        // 🔹 BỔ SUNG ĐOẠN NÀY ĐỂ NHẬN TÍN HIỆU TỪ HEADER VÀ XỬ LÝ LOGIN/LOGOUT
        window.addEventListener("message", (e) => {
        if (!e.data || !e.data.action) return;

        // Bấm nút Login trong header0
        if (e.data.action === "goToLogin") {
            window.location.href = "00_LOGIN.html";
        }

        // Bấm nút Sign Up trong header0
        if (e.data.action === "goToSignup") {
            window.location.href = "00_SIGNUP.html";
        }

        // Khi đăng nhập thành công (từ login.js hoặc login form)
        if (e.data.action === "loginSuccess" || e.data.action === "loggedIn") {
            localStorage.setItem("isLoggedIn", "true");
            document.getElementById("header-frame").src = "../template/header.html";
        }

        // Khi người dùng logout từ header.html
        if (e.data.action === "logout") {
            localStorage.removeItem("isLoggedIn");
            localStorage.removeItem("login_infor");
            document.getElementById("header-frame").src = "../template/header0.html";
        }
        // 🟢 Xử lý toggle notifications
        if (e.data.action === "toggleNotifications") {
            if (!window.NotificationPopup) {
                window.NotificationPopup = createNotificationPopupInParent(
                    e.data.notifications, 
                    e.data.bellPosition
                );
            } else {
                window.NotificationPopup.toggle();
            }
        }
        });
    </script>
    <div class="policy-container">
        <div class="term_head">
            <h1>Terms and <span>Conditions</span></h1>
            <p>Last updated: October 4<sup>th</sup>, 2025</p>
        </div>

        <div class="content-wrapper-policy">
            <!-- Sidebar Navigation -->
            <aside class="sidebar-policy">
                <nav>
                    <ul>
                        <li><a href="#general">General Principles & Terms</a></li>
                        <li><a href="#process">Process</a></li>
                    </ul>
                </nav>
            </aside>

            <!-- Main Content -->
            <main class="main-content-policy">
                <section class="section" id="general">
                    <h2>General Principles & Terms</h2>
                    
                    <h3>Definitions</h3>
                    <p>Throughout this website (SITE), EcoFit is committed to transparency while providing our eco-friendly products. The brand was created to bridge the gap between the growing demand for green consumption and the lack of a sustainable online shopping option in Vietnam.</p>
                    <ul>
                        <li><strong>Website</strong> refers to the official website of www.ecofit.com where customers can browse information, place orders, and use online services.</li>
                        <li><strong>Products</strong> includes sustainable or organically-labeled clothing, footwear, and accessories showcased on the website.</li>
                        <li><strong>Products</strong> includes all items available for sale on the website, such as eco-friendly goods, sustainable consumer products, and/or eco-friendly items, even household products, and/or organic items featured by EcoFit.</li>
                        <li><strong>Order</strong> is a purchase request authorized by a customer through EcoFit's online ordering system.</li>
                        <li><strong>Distribution</strong> is via Vietnam online EcoFit that relies product transactions and commercial handbooks, considering regulations, credit, monetary use, flexibilities, and production process.</li>
                    </ul>

                    <h3>General Regulation</h3>
                    <p>All products sold are entirely safe for human use on the skin and origin. EcoFit strictly prohibits counterfeit, substandard, or banned goods.</p>
                    <p>All transactions are conducted transparently and fairly to ensure consumer protection and a healthy e-commerce ecosystem.</p>
                    <p>By accessing and using the website, customers are deemed to have read, understood, and agreed to these Terms & Conditions. EcoFit reserves the right to update or revise the terms, with changes publicly announced at least 30 days in advance. Customers are advised to review updates to stay aware of the applied terms.</p>
                    <p>Customers confirm that (i) they are at least 18 years old or capable of entering valid contracts, and (ii) have full civil capacity (parent/main transactions under Vietnamese laws).</p>
                </section>
                <hr style="border-top: 1px solid "/>
                <section class="section-policy" id="process">
                    <h2>Process</h2>

                    <h3>1. Placing an Order</h3>
                    <p>EcoFit reserves the right to decline or cancel orders showing signs of incorrect information, suspected fraud, or irregular payment conditions. Any cancellation will be promptly notified to the customer.</p>
                    <p>During periods of promotions, when limited quantities are available, EcoFit prioritizes orders based on receiving time, when placing a valid transaction.</p>
                    <p>EcoFit is not responsible for issues arising from incorrect or missing information.</p>
                    <p>Orders placed outside business hours will be processed the next working day, with response times in the official promotion.</p>

                    <h3>2. Shopping Process</h3>
                    <p><strong>Step 1:</strong> Visit the EcoFit website and search for products using the search bar or filters (category, brand, price, or eco-friendly choice).</p>
                    <p><strong>Step 2:</strong> Select the desired product and click "Add to Cart".</p>
                    <p><strong>Step 3:</strong> Enter the cart, verify shipping price, quantities, and product details. Click "Checkout" to proceed.</p>
                    <p><strong>Step 4:</strong> Enter shipping information, choose delivery and payment methods, and apply discount codes (if any).</p>
                    <p><strong>Step 5:</strong> Click the item "I have read and agree to the Terms & Conditions".</p>
                    <p><strong>Step 6:</strong> "Complete the order". The system will send an email confirmation with your order ID.</p>

                    <h3>3. Payment Policy</h3>
                    <p><strong>Step 1:</strong> Customers confirm order information and choose a preferable payment method.</p>
                    <p><strong>Step 2:</strong> EcoFit supports the following payment methods:</p>
                    <ul>
                        <li>Online payment via bank cards (domestic ATM, Visa, MasterCard)</li>
                        <li>Online payment via e-wallets (MoMo, ZaloPay)</li>
                        <li>Cash on Delivery (COD)</li>
                    </ul>
                    <p>Currency applied: All transactions are conducted in Vietnamese Dong (VND).</p>
                    <p>International credit, exchange rate differences or processing fees may apply depending on the issuing bank's policy.</p>

                    <h3>4. Delivery</h3>
                    <p>Delivery Commitment: EcoFit cooperates with reputable shipping partners to ensure goods are delivered safely and on time.</p>
                    <p>Note that: The system automatically calculates and displays the realistic cost of checkout. Some road/flight-free regions may incur fees from shipping order EcoFit's promotional programs.</p>
                    <p><strong>Free Shipping:</strong> Available for frequent EcoFit members with high "Year Pass" points.</p>
                    <p><strong>Standard Estimated Delivery Time:</strong></p>
                    <ul>
                        <li>Inner city: 1-3 business days.</li>
                        <li>Suburban or nearby provinces: 2-5 business days.</li>
                        <li>Remote areas or islands: 5-7 business days.</li>
                    </ul>
                    <p>In cases of force majeure (weather, natural disasters, epidemics, etc.), delivery time may vary, and EcoFit will inform customers in advance.</p>

                    <h3>5. Confirmation of Goods Receipt</h3>
                    <p>After successful delivery, the system will send a confirmation notice to the customer. Buyers are encouraged to check their product carefully upon delivery arrival.</p>
                    <p>If damage, missing items, or incorrect products are found, customers should refuse to accept the order and notify EcoFit within 24 hours.</p>

                    <h3>6. Return and Exchange Policy</h3>
                    <p>EcoFit accepts returns or exchanges in the following cases:</p>
                    <ul>
                        <li>Products are defective or damaged during transportation.</li>
                        <li>Products differ from descriptions, models, or size ordered.</li>
                        <li>Products remain unused, with original tags and packaging, and the return request is made within 7 days of receipt.</li>
                    </ul>
                    <p><strong>Return and Exchange Process:</strong></p>
                    <ul>
                        <li><strong>Step 1:</strong> Customers contact the customer service department via hotline or email.</li>
                        <li><strong>Step 2:</strong> Provide order details and photos showing specific faults.</li>
                        <li><strong>Step 3:</strong> EcoFit reviews and guides customers to send the product back to the warehouse.</li>
                        <li><strong>Step 4:</strong> After receiving the returned product, EcoFit issues a replacement or refund within 3-5 working days.</li>
                    </ul>

                    <h3>7. Refund Policy</h3>
                    <p>For online payment orders: Refunds will be credited to the original payment account within 5-7 business days after confirmation.</p>
                    <p>For COD orders: Refunds will be made via bank transfer based on the customer's registered bank information.</p>
                    <p>If customers cancel an order before shipment, the full amount will be refunded 100%.</p>

                    <h3>8. Price and Customer Benefits</h3>
                    <p>Displayed prices on the EcoFit website always include VAT.</p>
                    <p>Promotions, discount codes, and "Green Points" rewards are applied according to EcoFit's current policies.</p>
                    <p>Customers connecting Green Points while purchasing, which can be redeemed for future purchases that support EcoFit's "Virtual Tree Planting Fund."</p>

                    <h3>9. Greenaway</h3>
                    <p>EcoFit is committed to running an eco-friendly website where EcoFit that measures environmental friendliness based on factors such as raw material usage, environmental certification, manufacturing process, and recyclability. This score is for reference purposes only, intended to assist customers in making eco-conscious purchasing decisions. It does not serve as a legal guarantee or warranty from EcoFit.</p>
                    <hr style="border-top: 1px solid; margin-top: 40px; "/>
                </section>
            </main>
        </div>
    </div>
    <iframe src="../template/footer.html" id="footer-frame" class="footer-frame"></iframe>
    <script>
        // --- CHỈNH CHỖ NÀY: selector class name phải đúng với HTML ---
        const sections = document.querySelectorAll('.main-content-policy .section, .main-content-policy .section-policy');
        const navLinks = document.querySelectorAll('.sidebar-policy nav ul li a');

        const options = {
            root: null,
            rootMargin: '-120px 0px 0px 0px',
            threshold: 0.2 // Giúp highlight mượt hơn
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                const id = entry.target.getAttribute('id');
                const targetLink = document.querySelector(`.sidebar-policy nav ul li a[href="#${id}"]`);

                if (entry.isIntersecting) {
                    // Xóa class active khỏi tất cả link
                    navLinks.forEach(link => link.classList.remove('current-section'));
                    // Thêm class active cho link tương ứng
                    if (targetLink) targetLink.classList.add('current-section');
                }
            });
        }, options);

        sections.forEach(section => observer.observe(section));

        // Khi vừa load trang, tô sẵn link đầu tiên
        if (sections.length > 0) {
            const firstLinkId = sections[0].getAttribute('id');
            const firstLink = document.querySelector(`.sidebar-policy nav ul li a[href="#${firstLinkId}"]`);
            if (firstLink) firstLink.classList.add('current-section');
        }
        // --- Đoạn scroll offset để header không che chữ ---
        document.querySelectorAll('.sidebar-policy nav ul li a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                const targetSection = document.getElementById(targetId);
                const headerOffset = 120; // chiều cao header
                const elementPosition = targetSection.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

                window.scrollTo({
                    top: offsetPosition,
                    behavior: 'smooth'
                });
            });
        });
    </script>

</body>
</html>
</body>
</html>