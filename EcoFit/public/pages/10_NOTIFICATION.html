<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Notifications</title>
  <link rel="icon" href="../images/ecofit_logo2.png" sizes="32x32" type="image/png">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&family=Outfit:wght@100..900&display=swap"
    rel="stylesheet">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="../css/USER_MAINSTYLE.css" />
  <script src="../js/notification_handler.js"></script>
</head>

<body>
  <iframe id="header-frame" class="header-frame"></iframe>
  <script>
          window.addEventListener("DOMContentLoaded", () => {
      const header = document.getElementById("header-frame");
      const isLoggedIn = localStorage.getItem("isLoggedIn") === "true";
      header.src = isLoggedIn
        ? "../template/header.html"
        : "../template/header0.html";
    });

    // üîπ B·ªî SUNG ƒêO·∫†N N√ÄY ƒê·ªÇ NH·∫¨N T√çN HI·ªÜU T·ª™ HEADER V√Ä X·ª¨ L√ù LOGIN/LOGOUT
    window.addEventListener("message", (e) => {
      if (!e.data || !e.data.action) return;

      // B·∫•m n√∫t Login trong header0
      if (e.data.action === "goToLogin") {
        window.location.href = "00_LOGIN.html";
      }

      // B·∫•m n√∫t Sign Up trong header0
      if (e.data.action === "goToSignup") {
        window.location.href = "00_SIGNUP.html";
      }

      // Khi ƒëƒÉng nh·∫≠p th√†nh c√¥ng (t·ª´ login.js ho·∫∑c login form)
      if (e.data.action === "loginSuccess" || e.data.action === "loggedIn") {
        localStorage.setItem("isLoggedIn", "true");
        document.getElementById("header-frame").src = "../template/header.html";
      }

      // Khi ng∆∞·ªùi d√πng logout t·ª´ header.html
      if (e.data.action === "logout") {
        localStorage.clear();
        document.getElementById("header-frame").src = "../template/header0.html";
      }
      // üü¢ X·ª≠ l√Ω toggle notifications
      if (e.data.action === "toggleNotifications") {
          if (!window.NotificationPopup) {
              window.NotificationPopup = createNotificationPopupInParent(
                  e.data.notifications, 
                  e.data.bellPosition
              );
          } else {
              window.NotificationPopup.toggle();
          }
      }
    });
  </script>

  <!-- Main Content -->
  <div class="personal_info_container">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="menu-section">
        <h1>My Account</h1>
        <nav>
          <ul>
            <li><a href="12_MYPLANT&DAILYGREENSTREAK.html">My Plant & Daily Green Streak</a></li>
            <li><a href="19_ORDERMANAGEMENT.html">Orders</a></li>
          </ul>
        </nav>
      </div>
      <div class="menu-section">
        <h1>Settings</h1>
        <nav>
          <ul>
            <li><a href="09_PERSONAL_INFO.html">Personal Info</a></li>
            <li><a href="11_PASSWORD.html">Password</a></li>
            <li class="active"><a href="10_NOTIFICATION.html">Notifications</a></li>
            <li><a href="#" id="sidebar-logout">Logout</a></li>
          </ul>
        </nav>
      </div>
    </div>

    <!-- Main Content Area -->
    <div class="content">
      <h2><b>Notifications</b></h2>

      <div class="notifications-content">
        <!-- Alerts & Notifications Section -->
        <div class="notification-section">
          <div class="section-header">
            <h3>Alerts & Notifications</h3>
            <a href="#" class="toggle-all">Toggle all</a>
          </div>
          <p class="section-subtitle">Send me:</p>

          <div class="notification-item">
            <label class="notification-label">
              <input type="checkbox" class="notification-checkbox" />
              <span class="checkbox-custom"></span>
              <div class="notification-text">
                <span class="notification-title">EcoFit Announcements</span>
                <p>Get updates about new eco-friendly products, events, and community activities.</p>
              </div>
            </label>
          </div>

          <div class="notification-item">
            <label class="notification-label">
              <input type="checkbox" class="notification-checkbox" />
              <span class="checkbox-custom"></span>
              <div class="notification-text">
                <span class="notification-title">Order & Delivery Updates</span>
                <p>Receive notifications about your order status, shipping, and delivery confirmations.</p>
              </div>
            </label>
          </div>

          <div class="notification-item">
            <label class="notification-label">
              <input type="checkbox" class="notification-checkbox" />
              <span class="checkbox-custom"></span>
              <div class="notification-text">
                <span class="notification-title">Green Program Progress</span>
                <p>Get notified when your Green Score increases or your tree grows to the next level.</p>
              </div>
            </label>
          </div>

          <div class="notification-item">
            <label class="notification-label">
              <input type="checkbox" class="notification-checkbox" />
              <span class="checkbox-custom"></span>
              <div class="notification-text">
                <span class="notification-title">Promotions & Eco Deals</span>
                <p>Stay informed about exclusive green discounts and sustainable shopping campaigns.</p>
              </div>
            </label>
          </div>

          <div class="notification-item">
            <label class="notification-label">
              <input type="checkbox" class="notification-checkbox" />
              <span class="checkbox-custom"></span>
              <div class="notification-text">
                <span class="notification-title">EcoFit Partner News</span>
                <p>Updates about new collaborations with sustainable brands and organizations.</p>
              </div>
            </label>
          </div>
        </div>

        <!-- Account Activity Section -->
        <div class="notification-section">
          <div class="section-header">
            <h3>Account Activity</h3>
            <a href="#" class="toggle-all">Toggle all</a>
          </div>
          <p class="section-subtitle">Email me when:</p>

          <div class="notification-item">
            <label class="notification-label">
              <input type="checkbox" class="notification-checkbox" />
              <span class="checkbox-custom"></span>
              <div class="notification-text">
                <span class="notification-title">Someone reacts to my review or comment</span>
              </div>
            </label>
          </div>

          <div class="notification-item">
            <label class="notification-label">
              <input type="checkbox" class="notification-checkbox" />
              <span class="checkbox-custom"></span>
              <div class="notification-text">
                <span class="notification-title">My order has been confirmed or shipped</span>
              </div>
            </label>
          </div>

          <div class="notification-item">
            <label class="notification-label">
              <input type="checkbox" class="notification-checkbox" />
              <span class="checkbox-custom"></span>
              <div class="notification-text">
                <span class="notification-title">I earn new Green Points from purchases</span>
              </div>
            </label>
          </div>

          <div class="notification-item">
            <label class="notification-label">
              <input type="checkbox" class="notification-checkbox" />
              <span class="checkbox-custom"></span>
              <div class="notification-text">
                <span class="notification-title">My membership level is upgraded (Seed ‚Üí Sprout ‚Üí Tree ‚Üí
                  Guardian)</span>
              </div>
            </label>
          </div>

          <div class="notification-item">
            <label class="notification-label">
              <input type="checkbox" class="notification-checkbox" />
              <span class="checkbox-custom"></span>
              <div class="notification-text">
                <span class="notification-title">My refund request or feedback has been processed</span>
              </div>
            </label>
          </div>

          <div class="notification-item">
            <label class="notification-label">
              <input type="checkbox" class="notification-checkbox" />
              <span class="checkbox-custom"></span>
              <div class="notification-text">
                <span class="notification-title">I receive a sustainability challenge invitation</span>
              </div>
            </label>
          </div>
        </div>

        <!-- Weekly Newsletters Section -->
        <div class="notification-section">
          <div class="section-header">
            <h3>Weekly Newsletters</h3>
            <a href="#" class="toggle-all">Toggle all</a>
          </div>
          <p class="section-subtitle">Subscribe me to:</p>

          <div class="notification-item">
            <label class="notification-label">
              <input type="checkbox" class="notification-checkbox" />
              <span class="checkbox-custom"></span>
              <div class="notification-text">
                <span class="notification-title">Eco Living Tips</span>
                <p>Weekly green habits, lifestyle inspirations, and product recommendations.</p>
              </div>
            </label>
          </div>

          <div class="notification-item">
            <label class="notification-label">
              <input type="checkbox" class="notification-checkbox" />
              <span class="checkbox-custom"></span>
              <div class="notification-text">
                <span class="notification-title">Sustainable Product Spotlight</span>
                <p>Discover featured eco-friendly items from verified sellers.</p>
              </div>
            </label>
          </div>

          <div class="notification-item">
            <label class="notification-label">
              <input type="checkbox" class="notification-checkbox" />
              <span class="checkbox-custom"></span>
              <div class="notification-text">
                <span class="notification-title">Green Community Highlights</span>
                <p>Read stories of users making an impact through sustainable shopping.</p>
              </div>
            </label>
          </div>

          <div class="notification-item">
            <label class="notification-label">
              <input type="checkbox" class="notification-checkbox" />
              <span class="checkbox-custom"></span>
              <div class="notification-text">
                <span class="notification-title">EcoFit Challenges & Rewards</span>
                <p>Stay up-to-date with gamified activities, streaks, and reward programs.</p>
              </div>
            </label>
          </div>
        </div>

        <!-- Update Button -->
        <div class="update-btn-container">
          <button class="update-notifications-btn">Update Email Notifications</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <iframe src="../template/footer.html" class="footer-frame"
    style="width: 100%; border: none; overflow: hidden"></iframe>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const logoutLink = document.getElementById("sidebar-logout");
      if (logoutLink) {
        logoutLink.addEventListener("click", (e) => {
          e.preventDefault();

          localStorage.clear();

          // G·ª≠i t√≠n hi·ªáu logout cho header
          const header = document.getElementById("header-frame");
          if (header && header.contentWindow) {
            header.contentWindow.postMessage({ action: "logout" }, "*");
          }

          // Reload header ƒë·ªÉ tr·ªü l·∫°i header0
          header.src = "../template/header0.html";

          // Chuy·ªÉn v·ªÅ trang ch·ªß
          window.location.href = "01_HOMEPAGE.html";
        });
      }
    });
  </script>
  <script src="../js/notification.js"></script>
</body>
</html>